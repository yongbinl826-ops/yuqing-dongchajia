# 舆情洞察家 - 项目任务列表

## 核心功能

### 后端服务与数据库
- [x] 设计数据库 Schema（评论表、分析结果表、用户监控任务表）
- [x] 实现 tRPC 后端路由（数据采集、情感分析、查询接口）
- [x] 集成 Twitter API 数据采集接口
- [x] 集成 Playwright 微博爬虫模块
- [x] 集成 Playwright 知乎爬虫模块
- [x] 实现 BERT 中文情感分析模块
- [x] 实现 Jieba 关键词提取与 TF-IDF 分析
- [x] 历史数据存储与检索功能

### 前端界面
- [x] 设计中文用户界面与色彩方案
- [x] 实现关键词输入表单与监控任务管理
- [x] 实现数据采集进度显示与日志
- [x] 实现情感分布饼图（Plotly）
- [x] 实现情感趋势折线图（Plotly）
- [x] 实现评论数据表格展示
- [ ] 实现数据导出为 CSV 功能
- [x] 实现用户认评与登录界面

### 数据采集与处理
- [ ] Twitter API 集成与数据采集
- [ ] 微博 Playwright 爬虫实现
- [ ] 知乎 Playwright 爬虫实现
- [ ] 爬虫错误处理与重试机制
- [ ] 爬虫代理轮换与反爬虫对策
- [ ] 数据去重与清洗

### 情感分析与 NLP
- [ ] 集成 Hugging Face bert-base-chinese 模型
- [ ] 实现情感分类（正面/负面/中性）
- [ ] 实现关键词提取（Jieba + TF-IDF）
- [ ] 实现情感分数计算与标准化

### 可视化与报表
- [ ] 情感分布饼图实现
- [ ] 情感趋势折线图实现
- [ ] 平台对比分析图表
- [ ] 时间序列数据聚合与展示
- [ ] 数据导出为 CSV 格式

### 测试与优化
- [x] 编写后端 API 单元测试（Vitest）- 15 个测试全部通过
- [ ] 编写前端组件测试
- [ ] 集成测试与端到端测试
- [ ] 性能优化与缓存策略
- [ ] 爬虫稳定性测试

### 部署与文档
- [ ] 环境变量配置与密钥管理
- [ ] 项目部署与上线
- [ ] 用户使用文档编写
- [ ] API 文档编写

## 优化建议

### 已识别的优化项
- ✅ 使用 BERT 模型替代 SnowNLP - 更高的准确度
- ✅ 增强爬虫稳定性 - 添加重试机制、代理轮换、动态等待
- ✅ 完善数据库设计 - 支持时间序列查询、数据聚合、导出功能
- ✅ 集成用户认证 - 使用 Manus OAuth 系统
- ✅ 构建现代化 Web 应用 - 使用 React + FastAPI 替代 Streamlit

## 技术栈

- **前端**: React 19 + Tailwind CSS 4 + Plotly.js
- **后端**: Express 4 + tRPC 11 + FastAPI (Python)
- **数据库**: MySQL/TiDB
- **NLP**: Hugging Face Transformers (BERT), Jieba
- **爬虫**: Playwright
- **测试**: Vitest
- **认证**: Manus OAuth

## 凭证信息

已收集的凭证（安全存储）：
- Twitter API Key: YAGAd9DhnPe6zJY5GBZzT5YYy
- Twitter API Secret: f0pHQpjURC8cUTSOwRLAhuoTvPlisb28c07AMSs4DpMTjCJ74p
- Twitter Access Token: 1978857524700037120-hb7CUdAEVXyzxedsuMolH9pet6rGqO
- Twitter Access Token Secret: OSNprAMGHyRjLBwG6ViClDQfp76snh93fG7ursrOy4Y2w
- 微博账号: 19973128978 / lyb517827
- 知乎账号: 19973128978 / lyb517827


## 继续开发任务

### 数据导出功能
- [x] 实现 CSV 导出接口（后端 tRPC 路由）
- [x] 前端导出按钮集成
- [x] 支持评论数据导出
- [x] 支持情感分析结果导出

### 实时数据采集
- [ ] 创建后台任务队列（Bull/Node-schedule）
- [ ] 实现 Twitter API 数据采集触发
- [ ] 实现微博 Playwright 爬虫触发
- [ ] 实现知乎 Playwright 爬虫触发
- [ ] 添加采集进度显示

### 关键词分析
- [ ] 实现关键词提取算法（Jieba）
- [ ] 实现 TF-IDF 计算
- [ ] 创建词云图可视化组件
- [ ] 创建关键词排行榜组件
- [ ] 前端集成关键词分析页面

### 性能优化
- [ ] 数据库查询优化和索引
- [ ] 前端组件懒加载
- [ ] API 缓存策略
- [ ] 爬虫速率限制

### 关键词分析可视化
- [x] 实现词云图组件
- [x] 实现高频关键词排行榜
- [x] 前端集成关键词分析页面

### Python NLP 服务集成
- [x] 创建 FastAPI 后端服务
- [x] 实现 BERT 情感分析接口
- [x] 实现 Jieba 关键词提取接口
- [x] 集成异步任务处理

### 后台任务队列
- [x] 创建 node-schedule 任务调度服务
- [x] 实现定时采集触发機制
- [x] 实现任务管理接口


### NLP 服务集成与分析
- [x] 创建后端 NLP 分析路由（tRPC）
- [x] 实现批量情感分析接口
- [x] 实现批量关键词提取接口
- [x] 集成 Python FastAPI 服务调用
- [x] 实现异步任务处理和结果存储

### 实时采集进度显示
- [ ] 添加采集进度条组件
- [ ] 实现进度实时更新机制
- [ ] 显示已处理评论数和速率
- [ ] 实现暂停/继续采集功能
- [ ] 添加采集日志显示

### 数据对比分析
- [ ] 实现时间段对比功能
- [ ] 实现平台对比分析
- [ ] 实现情感变化趋势图表
- [ ] 添加对比分析页面
- [ ] 实现数据导出对比结果


## 核心功能开发（继续）

### 数据采集工作流集成
- [ ] 创建数据采集触发接口（tRPC）
- [ ] 实现 Twitter 数据采集调用
- [ ] 实现微博数据采集调用
- [ ] 实现知乎数据采集调用
- [ ] 添加采集状态管理
- [ ] 前端集成"开始采集"按钮

### 实时情感分析处理
- [ ] 创建情感分析触发接口
- [ ] 实现批量评论情感分析
- [ ] 实现分析结果存储
- [ ] 添加分析进度跟踪
- [ ] 集成到采集工作流

### Plotly 可视化图表
- [x] 安装 Plotly.js 依赖
- [x] 创建情感分布饼图组件
- [x] 创建情感趋势折线图组件
- [ ] 创建平台对比图表组件
- [x] 集成到任务详情页面

### 实时进度显示
- [ ] 创建进度条组件
- [ ] 实现进度轮询机制
- [ ] 显示已处理评论数
- [ ] 显示采集速率
- [ ] 添加暂停/继续控制


## 最新完成的功能

### 数据采集工作流集成（已完成）
- [x] 创建数据采集触发路由（tRPC collector router）
- [x] 实现开始采集接口（startCollection mutation）
- [x] 实现停止采集接口（stopCollection mutation）
- [x] 实现采集进度查询接口（getProgress query）
- [x] 前端集成开始采集按钮（TaskDetail 页面）
- [x] 集成 Python 爬虫调用（spawn python3 进程）
